#!/usr/bin/env pybricks-micropython
from pybricks.hubs import EV3Brick
from pybricks.ev3devices import (Motor, TouchSensor, ColorSensor,
                                 InfraredSensor, UltrasonicSensor, GyroSensor)
from pybricks.parameters import Port, Stop, Direction, Button, Color
from pybricks.tools import wait, StopWatch, DataLog
from pybricks.robotics import DriveBase
from pybricks.media.ev3dev import SoundFile, ImageFile

# objeto ev3
ev3 = EV3Brick()

#inicando motores
motorEsquerdo = Motor(Port.A) # <- Declara motor esquerdo
motorDireito = Motor(Port.B) # <- Declara motor direito

#iniciando sensores de cor
sensorCorEsquerda = ColorSensor(Port.S1) # <- Declara sensor esquerdo
sensorCorDireita = ColorSensor(Port.S2) # <- Delcara sensor direito
robo = DriveBase(motorEsquerdo, motorDireito, wheel_diameter=4.70, axle_track=9.90) # <- Declara base do robo

print('executou')
## -----------------------------------curvas no verde[teste]-------------------------------------------------
def func_meiaVolta():#<-- função responsavel pelas curvas no verde
    robo.turn(360)
def func_curvaFechadaEsquerda():
    robo.turn(-180)
def func_curvaFechadaDireita():
    robo.turn(180)



#-----------------------------------seguindo linha [ok]---------------------------------------------------

while True:
    #anda reto
    if (sensorCorEsquerda.color() == Color.WHITE) and (sensorCorDireita.color() == Color.WHITE): # <- se sensor esquero e direio brancos, seguem reto
        robo.drive(8, 0)# <- acelera 20 de velocidade, reto

    #meia volta
    elif (sensorCorEsquerda.color() == Color.GREEN) and (sensorCorDireita.color() == Color.GREEN):
        robo.straight(0)
        func_meiaVolta()

    #curva em 90 para esquerda
    elif (sensorCorEsquerda.color() == Color.GREEN) and (sensorCorDireita.color() == Color.BLACK):
        robo.straight(0)
        func_curvaFechadaEsquerda()

    #curva em 90 para direita
    elif (sensorCorDireita.color() == Color.GREEN) and (sensorCorEsquerda.color() == Color.BLACK):
        robo.straight(0)
        func_curvaFechadaDireita()

    #curva esquerda
    elif (sensorCorEsquerda.color() != Color.WHITE):# <- se sensor esquerdo preto e sensor direito branco, vira pra esquerda
        robo.drive(1, -80)
        # print('TESTE1: Esquerda: ', sensorCorEsquerda.color(),'     Direita: ', sensorCorDireita.color())#<- relatatorio de cor

    #curva direita
    elif (sensorCorDireita.color() != Color.WHITE):# <- se sensor esquerda branco e sensor direito preto vira pra direita
        robo.drive(1, 80)# <- diminui a velocidade para 5 e vira 90° a direita
        # print('TESTE2: Esquerda: ', sensorCorEsquerda.color(),'     Direita: ', sensorCorDireita.color())#relatorio de cor
